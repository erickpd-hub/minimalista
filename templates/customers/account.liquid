{% comment %}
  Plantilla de Cuenta de Cliente
{% endcomment %}

<div class="px-4 py-16 mx-auto max-w-6xl">
  <div class="flex items-center justify-between mb-8">
    <h1>Mi Cuenta</h1>
    <a href="{{ routes.account_logout_url }}" class="text-neutral-600 hover:text-neutral-900">
      Cerrar Sesión
    </a>
  </div>

  <div class="grid gap-8 lg:grid-cols-3">
    <div class="lg:col-span-1">
      <div class="p-6 border rounded-lg border-neutral-200">
        <h2 class="mb-4">Información de Cuenta</h2>
        <div class="space-y-2">
          <p><strong>Nombre:</strong> {{ customer.first_name }} {{ customer.last_name }}</p>
          <p><strong>Email:</strong> {{ customer.email }}</p>
        </div>
        <a 
          href="{{ routes.account_addresses_url }}" 
          class="inline-block px-4 py-2 mt-4 border rounded-lg border-neutral-300 hover:border-neutral-900"
        >
          Ver Direcciones
        </a>
      </div>
    </div>

    <div class="lg:col-span-2">
      <h2 class="mb-6">Historial de Pedidos</h2>
      
      {% if customer.orders.size > 0 %}
        <div class="space-y-4">
          {% for order in customer.orders %}
            <div class="p-4 border rounded-lg border-neutral-200">
              <div class="flex items-center justify-between mb-4">
                <div>
                  <h3>Pedido #{{ order.name }}</h3>
                  <p class="text-neutral-600">{{ order.created_at | date: "%d %B %Y" }}</p>
                </div>
                <div class="text-right">
                  <p>{{ order.total_price | money }}</p>
                  <p class="text-neutral-600">{{ order.financial_status_label }}</p>
                </div>
              </div>
              
              <div class="pt-4 border-t border-neutral-200">
                {% for line_item in order.line_items %}
                  <div class="flex items-center gap-4 mb-3">
                    {% if line_item.image %}
                      <img 
                        src="{{ line_item.image | img_url: '100x100' }}" 
                        alt="{{ line_item.title }}"
                        class="object-cover w-16 h-16 rounded"
                      >
                    {% endif %}
                    <div class="flex-1">
                      <p>{{ line_item.title }}</p>
                      <p class="text-neutral-600">Cantidad: {{ line_item.quantity }}</p>
                    </div>
                    <p>{{ line_item.final_price | money }}</p>
                  </div>
                {% endfor %}
              </div>

              <a 
                href="{{ order.customer_url }}" 
                class="inline-block px-4 py-2 mt-4 border rounded-lg border-neutral-300 hover:border-neutral-900"
              >
                Ver Detalles
              </a>
            </div>
          {% endfor %}
        </div>
      {% else %}
        <div class="py-12 text-center border rounded-lg border-neutral-200">
          <p class="mb-4 text-neutral-600">No has realizado ningún pedido aún</p>
          <a 
            href="{{ routes.all_products_collection_url }}" 
            class="inline-block px-6 py-3 text-white bg-black rounded-lg hover:bg-neutral-800"
          >
            Comenzar a Comprar
          </a>
        </div>
      {% endif %}
    </div>
  </div>
</div>

{% schema %}
{
  "name": "Cuenta",
  "settings": []
}
{% endschema %}
